"use strict";var U=Object.create;var P=Object.defineProperty,X=Object.defineProperties,_=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var N=(t,e,n)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))O.call(e,n)&&N(t,n,e[n]);if(p)for(var n of p(e))C.call(e,n)&&N(t,n,e[n]);return t},S=(t,e)=>X(t,B(e));var x=(t,e)=>{var n={};for(var i in t)O.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&p)for(var i of p(t))e.indexOf(i)<0&&C.call(t,i)&&(n[i]=t[i]);return n};var W=(t,e)=>{for(var n in e)P(t,n,{get:e[n],enumerable:!0})},k=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of G(e))!O.call(t,s)&&s!==n&&P(t,s,{get:()=>e[s],enumerable:!(i=_(e,s))||i.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?U(V(t)):{},k(e||!t||!t.__esModule?P(n,"default",{value:t,enumerable:!0}):n,t)),q=t=>k(P({},"__esModule",{value:!0}),t);var R={};W(R,{Popover:()=>F,getCollisions:()=>w,positionDefault:()=>M,positionMatchWidth:()=>Q,positionRight:()=>J});module.exports=q(R);var l=Y(require("react")),A=require("@reach/portal"),v=require("@reach/rect"),y=require("@reach/utils"),a=require("tabbable"),F=l.forwardRef(function(s,i){var c=s,{unstable_skipInitialPortalRender:e}=c,n=x(c,["unstable_skipInitialPortalRender"]);return l.createElement(A.Portal,{unstable_skipInitialRender:e},l.createElement(H,u({ref:i},n)))});F.displayName="Popover";var H=l.forwardRef(function(h,b){var d=h,{as:e="div",targetRef:n,position:i=M,unstable_observableRefs:s=[]}=d,c=x(d,["as","targetRef","position","unstable_observableRefs"]);let m=l.useRef(null),T=(0,v.useRect)(m,{observe:!c.hidden}),E=(0,v.useRect)(n,{observe:!0}),g=(0,y.useComposedRefs)(m,b);return Z(n,m),l.createElement(e,S(u({"data-reach-popover":"",ref:g},c),{style:u(u({position:"absolute"},z(i,E,T,...s)),c.style)}))});H.displayName="PopoverImpl";function z(t,e,n,...i){return n?t(e,n,...i.map(s=>s.current)):{visibility:"hidden"}}function I(t,e,n){return{top:n?`${t.top-e.height+window.pageYOffset}px`:`${t.top+t.height+window.pageYOffset}px`}}var M=(t,e)=>{if(!t||!e)return{};let{directionRight:n,directionUp:i}=w(t,e);return u({left:n?`${t.right-e.width+window.pageXOffset}px`:`${t.left+window.pageXOffset}px`},I(t,e,i))},J=(t,e)=>{if(!t||!e)return{};let{directionLeft:n,directionUp:i}=w(t,e);return u({left:n?`${t.left+window.pageXOffset}px`:`${t.right-e.width+window.pageXOffset}px`},I(t,e,i))},Q=(t,e)=>{if(!t||!e)return{};let{directionUp:n}=w(t,e);return u({width:t.width,left:t.left},I(t,e,n))};function w(t,e,n=0,i=0){let s={top:t.top-e.height<0,right:window.innerWidth<t.left+e.width-n,bottom:window.innerHeight<t.bottom+e.height-i,left:t.left+t.width-e.width<0},c=s.right&&!s.left,b=s.left&&!s.right,h=s.bottom&&!s.top,d=s.top&&!s.bottom;return{directionRight:c,directionLeft:b,directionUp:h,directionDown:d}}function Z(t,e){let n=(0,y.getOwnerDocument)(t.current);function i(o){o.key==="Tab"&&e.current&&(0,a.tabbable)(e.current).length===0||(o.key==="Tab"&&o.shiftKey?m(o)?T(o):E(o)?g(o):j(o)&&L():o.key==="Tab"&&(c()?b(o):h()?d(o):$(o)&&L()))}l.useEffect(()=>(n.addEventListener("keydown",i),()=>{n.removeEventListener("keydown",i)}),[]);function s(){let o=(0,a.tabbable)(n),r=o&&t.current?o.indexOf(t.current):-1,f=o&&o[r+1];return e.current&&e.current.contains(f||null)?!1:f}function c(){return t.current?t.current===n.activeElement:!1}function b(o){let r=e.current&&(0,a.tabbable)(e.current);r&&r[0]&&(o.preventDefault(),r[0].focus())}function h(){if(e.current?e.current.contains(n.activeElement||null):!1){let r=e.current&&(0,a.tabbable)(e.current);return Boolean(r&&r[r.length-1]===n.activeElement)}return!1}function d(o){let r=s();r&&(o.preventDefault(),r.focus())}function m(o){if(!o.shiftKey)return;let r=s();return o.target===r}function T(o){let r=e.current&&(0,a.tabbable)(e.current),f=r&&r[r.length-1];f&&(o.preventDefault(),f.focus())}function E(o){let r=e.current&&(0,a.tabbable)(e.current);return r?r.length===0?!1:o.target===r[0]:!1}function g(o){var r;o.preventDefault(),(r=t.current)==null||r.focus()}function $(o){let r=e.current?(0,a.tabbable)(n).filter(f=>!e.current.contains(f)):null;return r?o.target===r[r.length-1]:!1}function j(o){return o.target===(0,a.tabbable)(n)[0]}let K=[];function L(){let o=e.current&&(0,a.tabbable)(e.current);o&&(o.forEach(r=>{K.push([r,r.tabIndex]),r.tabIndex=-1}),n.addEventListener("focusin",D))}function D(){n.removeEventListener("focusin",D),K.forEach(([o,r])=>{o.tabIndex=r})}}0&&(module.exports={Popover,getCollisions,positionDefault,positionMatchWidth,positionRight});
