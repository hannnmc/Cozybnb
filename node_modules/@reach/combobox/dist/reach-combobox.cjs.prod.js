"use strict";var Be=Object.create;var F=Object.defineProperty,Ge=Object.defineProperties,Ue=Object.getOwnPropertyDescriptor,We=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertyNames,q=Object.getOwnPropertySymbols,Ke=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var pe=(e,t,o)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))ne.call(t,o)&&pe(e,o,t[o]);if(q)for(var o of q(t))fe.call(t,o)&&pe(e,o,t[o]);return e},m=(e,t)=>Ge(e,We(t));var D=(e,t)=>{var o={};for(var n in e)ne.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&q)for(var n of q(e))t.indexOf(n)<0&&fe.call(e,n)&&(o[n]=e[n]);return o};var je=(e,t)=>{for(var o in t)F(e,o,{get:t[o],enumerable:!0})},be=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Fe(t))!ne.call(e,l)&&l!==o&&F(e,l,{get:()=>t[l],enumerable:!(n=Ue(t,l))||n.enumerable});return e};var ze=(e,t,o)=>(o=e!=null?Be(Ke(e)):{},be(t||!e||!e.__esModule?F(o,"default",{value:e,enumerable:!0}):o,e)),Ye=e=>be(F({},"__esModule",{value:!0}),e);var at={};je(at,{Combobox:()=>Ie,ComboboxButton:()=>Se,ComboboxInput:()=>ge,ComboboxList:()=>ve,ComboboxOption:()=>ye,ComboboxOptionText:()=>se,ComboboxPopover:()=>Te,escapeRegexp:()=>Pe,unstable_useKeyDown:()=>ee,useComboboxContext:()=>ot,useComboboxOptionContext:()=>nt});module.exports=Ye(at);var a=ze(require("react")),u=require("@reach/utils"),P=require("@reach/descendants");function $e({autoEscape:e,caseSensitive:t=!1,findChunks:o=xe,sanitize:n,searchWords:l,textToHighlight:i}){return me({chunksToHighlight:Ce({chunks:o({autoEscape:e,caseSensitive:t,sanitize:n,searchWords:l,textToHighlight:i})}),totalLength:i?i.length:0})}function Ce({chunks:e}){return e.sort((t,o)=>t.start-o.start).reduce((t,o)=>{if(t.length===0)return[o];{let n=t.pop();if(o.start<=n.end){let l=Math.max(n.end,o.end);t.push({highlight:!1,start:n.start,end:l})}else t.push(n,o);return t}},[])}function xe({autoEscape:e,caseSensitive:t,sanitize:o=Xe,searchWords:n,textToHighlight:l}){return l=o(l||""),n.filter(i=>i).reduce((i,s)=>{s=o(s),e&&(s=qe(s));let p=new RegExp(s,t?"g":"gi"),r;for(;r=p.exec(l||"");){let b=r.index,c=p.lastIndex;c>b&&i.push({highlight:!1,start:b,end:c}),r.index===p.lastIndex&&p.lastIndex++}return i},[])}function me({chunksToHighlight:e,totalLength:t}){let o=[];if(e.length===0)n(0,t,!1);else{let l=0;e.forEach(i=>{n(l,i.start,!1),n(i.start,i.end,!0),l=i.end}),n(l,t,!1)}return o;function n(l,i,s){i-l>0&&o.push({start:l,end:i,highlight:s})}}function Xe(e){return e}function qe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}var Re={combineChunks:Ce,fillInChunks:me,findAll:$e,findChunks:xe};var Ee=require("@reach/auto-id"),Q=require("@reach/popover"),d="IDLE",N="SUGGESTING",A="NAVIGATING",G="INTERACTING",V="CLEAR",k="CHANGE",ae="INITIAL_CHANGE",g="NAVIGATE",le="SELECT_WITH_KEYBOARD",H="SELECT_WITH_CLICK",U="ESCAPE",M="BLUR",J="INTERACT",B="FOCUS",Z="OPEN_WITH_BUTTON",re="OPEN_WITH_INPUT_CLICK",K="CLOSE_WITH_BUTTON",Je={initial:d,states:{[d]:{on:{[M]:d,[V]:d,[k]:N,[ae]:d,[B]:N,[g]:A,[Z]:N,[re]:N}},[N]:{on:{[k]:N,[B]:N,[g]:A,[V]:d,[U]:d,[M]:d,[H]:d,[J]:G,[K]:d}},[A]:{on:{[k]:N,[B]:N,[V]:d,[M]:d,[U]:d,[g]:A,[H]:d,[le]:d,[K]:d,[J]:G}},[G]:{on:{[V]:d,[k]:N,[B]:N,[M]:d,[U]:d,[g]:A,[K]:d,[H]:d}}}},Qe=(e,t)=>{let o=m(C({},e),{lastEventType:t.type});switch(t.type){case k:case ae:return m(C({},o),{navigationValue:null,value:t.value});case g:case Z:case re:return m(C({},o),{navigationValue:he(o,t)});case V:return m(C({},o),{value:"",navigationValue:null});case M:case U:return m(C({},o),{navigationValue:null});case H:return m(C({},o),{value:t.isControlled?e.value:t.value,navigationValue:null});case le:return m(C({},o),{value:t.isControlled?e.value:e.navigationValue,navigationValue:null});case K:return m(C({},o),{navigationValue:null});case J:return o;case B:return m(C({},o),{navigationValue:he(o,t)});default:return o}};function Ze(e){return[N,A,G].includes(e)}function he(e,t){return t.value?t.value:t.persistSelection?e.value:null}var ie=(0,P.createDescendantContext)("ComboboxDescendantContext"),O=(0,u.createNamedContext)("ComboboxContext",{}),ue=(0,u.createNamedContext)("OptionContext",{}),Ie=a.forwardRef((r,p)=>{var b=r,{onSelect:e,openOnFocus:t=!1,children:o,as:n="div","aria-label":l,"aria-labelledby":i}=b,s=D(b,["onSelect","openOnFocus","children","as","aria-label","aria-labelledby"]);var $;let[c,x]=(0,P.useDescendantsInit)(),E=a.useRef(),T=a.useRef(),R=a.useRef(),v=a.useRef(!1),I=a.useRef(!1),y={value:"",navigationValue:null},[f,L,S]=tt(Je,Qe,y);et(L.lastEventType,E);let w=(0,Ee.useId)(s.id),j=w?(0,u.makeId)("listbox",w):"listbox",z=a.useRef(!1),W=Ze(f),Y={ariaLabel:l,ariaLabelledby:i,autocompletePropRef:v,buttonRef:R,comboboxId:w,data:L,inputRef:E,isExpanded:W,listboxId:j,onSelect:e||u.noop,openOnFocus:t,persistSelectionRef:I,popoverRef:T,state:f,transition:S,isControlledRef:z};return a.createElement(P.DescendantProvider,{context:ie,items:c,set:x},a.createElement(O.Provider,{value:Y},a.createElement(n,m(C({},s),{"data-reach-combobox":"","data-state":ce(f),"data-expanded":W||void 0,ref:p}),(0,u.isFunction)(o)?o({id:w,isExpanded:W,navigationValue:($=L.navigationValue)!=null?$:null,state:f}):o)))});Ie.displayName="Combobox";var ge=a.forwardRef((x,c)=>{var E=x,{as:e="input",selectOnClick:t=!1,autocomplete:o=!0,onClick:n,onChange:l,onKeyDown:i,onBlur:s,onFocus:p,value:r}=E,b=D(E,["as","selectOnClick","autocomplete","onClick","onChange","onKeyDown","onBlur","onFocus","value"]);let{current:T}=a.useRef(r),R=a.useRef(!1);(0,u.useUpdateEffect)(()=>{R.current=!0},[r]);let{data:{navigationValue:v,value:I,lastEventType:y},inputRef:f,state:L,transition:S,listboxId:w,autocompletePropRef:j,openOnFocus:z,isExpanded:W,ariaLabel:Y,ariaLabelledby:$,persistSelectionRef:Oe,isControlledRef:_e}=a.useContext(O),Ae=(0,u.useComposedRefs)(f,c),te=a.useRef(!1),De=ee(),Ve=Ne(),_=typeof r!="undefined",lt=typeof T!="undefined";a.useEffect(()=>{_e.current=_},[_]),(0,u.useIsomorphicLayoutEffect)(()=>{j.current=o},[o,j]);let oe=a.useCallback(h=>{h.trim()===""?S(V,{isControlled:_}):h===T&&!R.current?S(ae,{value:h}):S(k,{value:h})},[T,S,_]);a.useEffect(()=>{_&&r!==I&&(r.trim()===""?(I||"").trim()!=="":!0)&&oe(r)},[r,oe,_,I]),a.useEffect(()=>{var de;let h=(de=f.current)==null?void 0:de.form;if(!h)return;function X(rt){S(V,{isControlled:_})}return h.addEventListener("reset",X),()=>{h==null||h.removeEventListener("reset",X)}},[f,_,S]);function He(h){let{value:X}=h.target;_||oe(X)}function we(){t&&(te.current=!0),z&&y!==H&&S(B,{persistSelection:Oe.current})}function ke(){var h;te.current&&(te.current=!1,(h=f.current)==null||h.select()),z&&L===d&&S(re)}let Me=o&&(L===A||L===G)?v||r||I:r||I;return a.createElement(e,m(C({"aria-activedescendant":v?String(Le(v)):void 0,"aria-autocomplete":"both","aria-controls":w,"aria-expanded":W,"aria-haspopup":"listbox","aria-label":Y,"aria-labelledby":Y?void 0:$,role:"combobox"},b),{"data-reach-combobox-input":"","data-state":ce(L),ref:Ae,onBlur:(0,u.composeEventHandlers)(s,Ve),onChange:(0,u.composeEventHandlers)(l,He),onClick:(0,u.composeEventHandlers)(n,ke),onFocus:(0,u.composeEventHandlers)(p,we),onKeyDown:(0,u.composeEventHandlers)(i,De),value:Me||""}))});ge.displayName="ComboboxInput";var Te=a.forwardRef((r,p)=>{var b=r,{as:e="div",children:t,portal:o=!0,onKeyDown:n,onBlur:l,position:i=Q.positionMatchWidth}=b,s=D(b,["as","children","portal","onKeyDown","onBlur","position"]);let{popoverRef:c,inputRef:x,isExpanded:E,state:T}=a.useContext(O),R=(0,u.useComposedRefs)(c,p),v=ee(),I=Ne(),y={"data-reach-combobox-popover":"","data-state":ce(T),onKeyDown:(0,u.composeEventHandlers)(n,v),onBlur:(0,u.composeEventHandlers)(l,I),hidden:!E,tabIndex:-1,children:t};return o?a.createElement(Q.Popover,C(m(C({as:e},s),{ref:R,"data-expanded":E||void 0,position:i,targetRef:x,unstable_skipInitialPortalRender:!0}),y)):a.createElement(e,C(C({ref:R},s),y))});Te.displayName="ComboboxPopover";var ve=a.forwardRef((l,n)=>{var i=l,{persistSelection:e=!1,as:t="ul"}=i,o=D(i,["persistSelection","as"]);let{persistSelectionRef:s,listboxId:p}=a.useContext(O);return e&&(s.current=!0),a.createElement(t,m(C({role:"listbox"},o),{ref:n,"data-reach-combobox-list":"",id:p}))});ve.displayName="ComboboxList";var ye=a.forwardRef((p,s)=>{var r=p,{as:e="li",children:t,index:o,value:n,onClick:l}=r,i=D(r,["as","children","index","value","onClick"]);let{onSelect:b,data:{navigationValue:c},transition:x,isControlledRef:E}=a.useContext(O),T=a.useRef(null),[R,v]=(0,u.useStatefulRefValue)(T,null),I=a.useMemo(()=>({element:R,value:n}),[n,R]),y=(0,P.useDescendant)(I,ie,o),f=(0,u.useComposedRefs)(s,v),L=c===n,S=()=>{b&&b(n),x(H,{value:n,isControlled:E.current})};return a.createElement(ue.Provider,{value:{value:n,index:y}},a.createElement(e,m(C({"aria-selected":L,role:"option"},i),{"data-reach-combobox-option":"",ref:f,id:String(Le(n)),"data-highlighted":L?"":void 0,tabIndex:-1,onClick:(0,u.composeEventHandlers)(l,S)}),t?(0,u.isFunction)(t)?t({value:n,index:y}):t:a.createElement(se,null)))});ye.displayName="ComboboxOption";function se(){let{value:e}=a.useContext(ue),{data:{value:t}}=a.useContext(O),o=a.useMemo(()=>Re.findAll({searchWords:Pe(t||"").split(/\s+/),textToHighlight:e}),[t,e]);return a.createElement(a.Fragment,null,o.length?o.map((n,l)=>{let i=e.slice(n.start,n.end);return a.createElement("span",{key:l,"data-reach-combobox-option-text":"","data-user-value":n.highlight?!0:void 0,"data-suggested-value":n.highlight?void 0:!0},i)}):e)}se.displayName="ComboboxOptionText";var Se=a.forwardRef((i,l)=>{var s=i,{as:e="button",onClick:t,onKeyDown:o}=s,n=D(s,["as","onClick","onKeyDown"]);let{transition:p,state:r,buttonRef:b,listboxId:c,isExpanded:x}=a.useContext(O),E=(0,u.useComposedRefs)(b,l),T=ee(),R=()=>{p(r===d?Z:K)};return a.createElement(e,m(C({"aria-controls":c,"aria-haspopup":"listbox","aria-expanded":x},n),{"data-reach-combobox-button":"",ref:E,onClick:(0,u.composeEventHandlers)(t,R),onKeyDown:(0,u.composeEventHandlers)(o,T)}))});Se.displayName="ComboboxButton";function et(e,t){(0,u.useIsomorphicLayoutEffect)(()=>{var o;(e===g||e===U||e===H||e===Z)&&((o=t.current)==null||o.focus())},[t,e])}function ee(){let{data:{navigationValue:e},onSelect:t,state:o,transition:n,autocompletePropRef:l,persistSelectionRef:i,inputRef:s,isControlledRef:p}=a.useContext(O),r=(0,P.useDescendants)(ie);return function(c){var y;let x=r.findIndex(({value:f})=>f===e);function E(){return x===r.length-1?l.current?null:R():r[(x+1)%r.length]}function T(){return x===0?l.current?null:v():x===-1?v():r[(x-1+r.length)%r.length]}function R(){return r[0]}function v(){return r[r.length-1]}let I=((y=s.current)==null?void 0:y.tagName.toUpperCase())==="TEXTAREA"&&s.current.value.includes(`
`);switch(c.key){case"ArrowDown":if(!r||!r.length)return;if(o===d){if(I)return;c.preventDefault(),n(g,{persistSelection:i.current})}else{c.preventDefault();let f=E();n(g,{value:f?f.value:null})}break;case"ArrowUp":if(!r||!r.length)return;if(o===d){if(I)return;c.preventDefault(),n(g,{persistSelection:i.current})}else{c.preventDefault();let f=T();n(g,{value:f?f.value:null})}break;case"Home":case"PageUp":if(c.preventDefault(),!r||r.length===0)return;o===d?n(g):n(g,{value:R().value});break;case"End":case"PageDown":if(c.preventDefault(),!r||r.length===0)return;o===d?n(g):n(g,{value:v().value});break;case"Escape":o!==d&&n(U);break;case"Enter":o===A&&e!==null&&(c.preventDefault(),t&&t(e),n(le,{isControlled:p.current}));break}}}function Ne(){let{state:e,transition:t,popoverRef:o,inputRef:n,buttonRef:l}=a.useContext(O);return function(s){let p=o.current,r=n.current,b=l.current,c=s.relatedTarget;c!==r&&c!==b&&p&&(p.contains(c)?e!==G&&t(J):t(M))}}function tt(e,t,o){let[n,l]=a.useState(e.initial),[i,s]=a.useReducer(t,o);return[n,i,(r,b={})=>{let c=e.states[n],x=c&&c.on[r];if(x){s(C({type:r,state:n,nextState:n},b)),l(x);return}}]}function Le(e){let t=0;if(e.length===0)return t;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t=t&t;return t}function ce(e){return e.toLowerCase()}function Pe(e){return String(e).replace(/([.*+?=^!:${}()|[\]/\\])/g,"\\$1")}function ot(){let{isExpanded:e,comboboxId:t,data:o,state:n}=a.useContext(O),{navigationValue:l}=o;return a.useMemo(()=>({id:t,isExpanded:e,navigationValue:l!=null?l:null,state:n}),[t,e,l,n])}function nt(){let{value:e,index:t}=a.useContext(ue);return a.useMemo(()=>({value:e,index:t}),[e,t])}0&&(module.exports={Combobox,ComboboxButton,ComboboxInput,ComboboxList,ComboboxOption,ComboboxOptionText,ComboboxPopover,escapeRegexp,unstable_useKeyDown,useComboboxContext,useComboboxOptionContext});
